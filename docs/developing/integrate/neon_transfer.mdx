---
title: Neon Transfer SDK
proofedDate: na
iterationBy: na
includedInSite: true
approvedBy: na
comment: Vale not setup for mdx on this branch -- needs merge of branch with fix to do full proof. Grammarly proofing done
---

import { DemoFrame } from '@site/src/components/DemoFrame';
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

This page explains how to pass tokens between Solana and Neon EVM programmatically.

## TL;DR

- [Neon Transfer SDK](https://www.npmjs.com/package/@neonevm/token-transfer-core) is available as an npm package.
- [Github repo](https://github.com/neonlabsorg/neon-client-transfer) available.
- [React demo](https://codesandbox.io/s/neon-token-transfer-demo-2x5gdt) available.

## Introduction

This page describes how to use the Neon Transfer SDK that provides similar to the [NeonPass UI](https://devnet.neonpass.live) functionality.
The SDK is an npm package. It supports the transfer of SPL or ERC-20 tokens between Solana and Neon EVM.

## Prerequisites

- You need to integrate Solana-compatible and EVM-compatible wallet providers from supported official libraries such as `ether.js`, which we will use in further examples.
- Supported browser plugins (e.g. Phantom or MetaMask wallets).

## Step 1: Install and setup

### 1.1 Install the package

<Tabs>
<TabItem value="Opt1" label="Yarn" default>

```sh
yarn add @neonevm/token-transfer-core
yarn add @neonevm/token-transfer-ethers
```

</TabItem>
<TabItem value="Opt2" label="NPM" default>

```sh
npm install @neonevm/token-transfer-core --save
npm install @neonevm/token-transfer-ethers
```

</TabItem>
</Tabs>

### 1.2 Enable access to wallets

Now you need to create a connection to the Solana and NeonEVM devnet, and connect the appropriate wallets to perform transfers between them.

```javascript
import { JsonRpcProvider } from 'ethers';

const neonNeonEvmUrl = `https://devnet.neonevm.org`;
const solNeonEvmUrl = `https://devnet.neonevm.org/solana/sol`;
const solanaUrl = `https://api.devnet.solana.com`;
const neonProxyApi = new NeonProxyRpcApi(neonNeonEvmUrl);
const solProxyApi = new NeonProxyRpcApi(solNeonEvmUrl);

const connection = new Connection(solanaUrl, 'confirmed');

const solanaWallet = Keypair.fromSecretKey(PHANTOM_PRIVATE);
const provider = new JsonRpcProvider(neonNeonEvmUrl);
const neonWallet = new Wallet(NEON_PRIVATE, provider);
```

### 1.3 Configure parameters

We employ the `evmParams` method from Neon EVM to obtain specific addresses and constants required for seamless operations.

Also, the `nativeTokenList` method contains a list of tokens that are native to Neon EVM and can be used as a token gas fee.

```javascript

// nativeTokenList returns the native token list for every chain network, first will be NEON, second SOL
const [neonNativeToken, solNativeToken] = await neonProxyApi.nativeTokenList(); // get native tokens for chain networks
const neonProxyStatus = await neonProxyApi.evmParams(); // get evm params config
const solProxyStatus = await solProxyApi.evmParams();

// for NEON token native network
const neonChainId = Number(neonNativeToken.tokenChainId);
const neonTokenMint = new PublicKey(neonNativeToken.tokenMint);
const neonEvmProgram = new PublicKey(neonProxyStatus.neonEvmProgramId);

// for SOL token native network
const solChainId = Number(solNativeToken.tokenChainId);
const solTokenMint = new PublicKey(solNativeToken.tokenMint);
const solEvmProgram = new PublicKey(solProxyStatus.neonEvmProgramId);
```

## Step 2: Transfer tokens

### 2.1 Transfer NEON

<Tabs>
<TabItem value="Opt1" label="Solana to Neon EVM" default>

This example will generate a transaction to transfer NEON from Solana to Neon EVM.

```javascript
import {
  NEON_TOKEN_MINT_DECIMALS,
  solanaNEONTransferTransaction,
  SPLToken
} from '@neonevm/token-transfer-core';

const neonToken: SPLToken = {
  chainId: neonChainId,
  address_spl: neonTokenMint.toBase58(),
  address: '',
  decimals: NEON_TOKEN_MINT_DECIMALS,
  name: 'Neon',
  symbol: 'NEON',
  logoURI: 'https://raw.githubusercontent.com/neonlabsorg/token-list/main/neon_token_md.png'
};

const transaction = await solanaNEONTransferTransaction(solanaWallet, neonWallet, neonEvmProgram, neonTokenMint, neonToken, amount, chainId);
const signature = await sendSolanaTransaction(connection, transaction, [toSigner(solanaWallet)]);
console.log(signature);
```

</TabItem>
<TabItem value="Opt2" label="Neon EVM to Solana" default>

Similarly, to transfer NEON from Neon EVM to Solana, use this pattern:

```javascript
import {
  NEON_TRANSFER_CONTRACT_DEVNET,
  NEON_TOKEN_MINT_DECIMALS
} from '@neonevm/token-transfer-core';

const neonToken: SPLToken = {
  chainId: neonChainId,
  address_spl: neonTokenMint.toBase58(),
  address: '',
  decimals: NEON_TOKEN_MINT_DECIMALS,
  name: 'Neon',
  symbol: 'NEON',
  logoURI: 'https://raw.githubusercontent.com/neonlabsorg/token-list/main/neon_token_md.png'
};

const transaction = await neonNeonTransactionEthers({ provider, neonWallet.address, NEON_TRANSFER_CONTRACT_DEVNET, solanaWallet, amount });
const signedTrx = await neonWallet.signTransaction(transaction);
if (signedTrx?.rawTransaction) {
  const txResult = neonWallet.sendSignedTransaction(signedTrx.rawTransaction);
  txResult.on('transactionHash', (hash: string) => console.log(hash));
  txResult.on('error', (error: Error) => console.error(error));
}
```

</TabItem>
</Tabs>

> Note: You can find more examples in our [repository](https://github.com/neonlabsorg/neon-client-transfer) in the `examples` folder.

### 2.2 Transfer SOL

<!--
To transfer SOL as a native token, it is necessary to change the configuration of Neon EVM.

```javascript
// Neon EVM Devnet for SOL fee configuration
const proxyUrl = `https://devnet.neonevm.org/solana/sol`;
const solProxyRpcApi = new NeonProxyRpcApi(proxyUrl);
const solProxyStatus = await solProxyRpcApi.evmParams();
const gasTokens = await solProxyRpcApi.nativeTokenList();

const id = gasTokens.findIndex(i => i.token_name === 'SOL');
const gasToken = gasTokens[id];

const neonEvmProgram = new PublicKey(solProxyStatus.NEON_EVM_ID);
const solTokenMint = new PublicKey(gasToken.token_mint);
const chainId = parseInt(gasToken.token_chain_id, 16);
const web3 = new Web3(new HttpProvider(proxyUrl));
```
-->

<Tabs>
<TabItem value="Opt1" label="Solana to Neon EVM" default>

To transfer SOL token as a native token from Solana to Neon EVM, use the following patterns:

```javascript
import { solanaSOLTransferTransaction, SPLToken } from '@neonevm/token-transfer-core';

const solToken: SPLToken = {
  chainId: solChainId,
  address_spl: 'So11111111111111111111111111111111111111112',
  address: '0xc7Fc9b46e479c5Cb42f6C458D1881e55E6B7986c',
  decimals: 9,
  name: 'Solana SOL',
  symbol: 'SOL',
  logoURI: 'https://raw.githubusercontent.com/neonlabsorg/token-list/master/assets/solana-sol-logo.svg'
};
const amount = '1';

const transaction = await solanaSOLTransferTransaction({
  connection,
  solanaWallet.publicKey, 
  neonWallet.address,
  neonEvmProgram: solEvmProgram,
  neonTokenMint: solTokenMint,
  splToken: solToken, 
  amount,
  chainId: solChainId 
});
const signature = await sendSolanaTransaction(connection, transaction, [toSigner(solanaWallet)]);
console.log(signature);
```

</TabItem>
<TabItem value="Opt2" label="Neon EVM to Solana" default>

Similarly, to transfer SOL tokens from Neon EVM to Solana:

```javascript
import {
  SOL_TRANSFER_CONTRACT_DEVNET,
  NEON_TOKEN_MINT_DECIMALS
} from '@neonevm/token-transfer-core';

const neonToken: SPLToken = {
  chainId: neonChainId,
  address_spl: neonTokenMint.toBase58(),
  address: '',
  decimals: NEON_TOKEN_MINT_DECIMALS,
  name: 'Neon',
  symbol: 'NEON',
  logoURI: 'https://raw.githubusercontent.com/neonlabsorg/token-list/main/neon_token_md.png'
};

const transaction = await neonNeonTransactionEthers({ provider, neonWallet.address, SOL_TRANSFER_CONTRACT_DEVNET, solanaWallet, amount });
const signedTrx = await neonWallet.signTransaction(transaction);
if (signedTrx?.rawTransaction) {
  const txResult = neonWallet.sendSignedTransaction(signedTrx.rawTransaction);
  txResult.on('transactionHash', (hash: string) => console.log(hash));
  txResult.on('error', (error: Error) => console.error(error));
}

```

</TabItem>
</Tabs>

An ERC20 transfer using SOL gas fee is similar to a transfer with NEON gas fee and has been described earlier in this documentation.

### 2.3 Transfer ERC-20 tokens

When working with Devnet, Testnet, or Mainnet, different ERC-20 tokens are utilized. We maintain a JSON [list of supported tokens](https://github.com/neonlabsorg/token-list). Alternatively, please refer to the [token list](/docs/tokens/token_list.md).

For install `token-list` to your project, use this pattern:

```shell
yarn add token-list@https://github.com/neonlabsorg/token-list.git
# or
npm install token-list@https://github.com/neonlabsorg/token-list.git --save
```

<Tabs>
<TabItem value="Opt1" label="Solana to Neon EVM" default>

To transfer ERC-20 tokens from Solana to Neon EVM, use the following patterns:

```javascript
import tokenList from 'token-list/tokenlist.json';

const proxyUrl = `https://devnet.neonevm.org`;
const tokens = tokenList.tokens.filter((token) => token.chainId === CHAIN_ID);
const token = tokens[0];
//The wallet signer from ethers.js, used for signing the transaction.
const walletSigner = new Wallet(keccak256(Buffer.from(`${neonWallet.address.slice(2)}${solanaWallet.publicKey.toBase58()}`, 'utf-8')), new JsonRpcProvider(proxyUrl));

const transaction = await neonTransferMintTransactionEthers({ 
  connection, 
  proxyApi, 
  neonEvmProgram/* or solEvmProgram*/, 
  solanaWallet,
  neonWallet: neonWallet.address,
  walletSigner,
  splToken: token, 
  amount,
  chainId: neonChainId /*or solChainId*/ 
});
transaction.recentBlockhash = (await connection.getLatestBlockhash()).blockhash;
const signature = await connection.sendRawTransaction(transaction.serialize());
```

</TabItem>
<TabItem value="Opt2" label="Neon EVM to Solana" default>

Similarly, to transfer ERC-20 tokens from Neon EVM to Solana:

```javascript
import tokenList from 'token-list/tokenlist.json';

const tokens = tokenList.tokens.filter((token) => token.chainId === CHAIN_ID);
const mintPubkey = new PublicKey(token.address_spl);
const associatedToken = getAssociatedTokenAddressSync(mintPubkey, solanaWallet);
const solanaTransaction = createAssociatedTokenAccountTransaction({ 
  solanaWallet,
  tokenMint: mintPubkey, 
  associatedToken,
  neonHeapFrame: proxyStatus.NEON_HEAP_FRAME 
});
solanaTransaction.recentBlockhash = (await connection.getLatestBlockhash()).blockhash;
const neonTransaction = await createMintNeonTransactionEthers({ 
  provider,
  neonWallet: neonWallet.address, 
  associatedToken,
  splToken: token, 
  amount
});
const solanaSignature = await connection.sendRawTransaction(transaction.serialize());
const neonSignature = await neonWallet.signTransaction(transaction);
const txResult = neonWallet.sendSignedTransaction(neonSignature.rawTransaction);
```

</TabItem>
</Tabs>



More examples of operations with tokens can be found in the `examples` folder of our [Github repo](https://github.com/neonlabsorg/neon-client-transfer).
For details, see also our comprehensive [specification of the Neon Transfer SDK](https://sdk.neonevm.org/).

<!-- to be uncommented after fixing the bug https://neonlabs.atlassian.net/browse/FRONT-429
## React Demo App

The following [live demo with an open codebase](https://github.com/neonlabsorg/neon-client-transfer/tree/develop/examples/neon-transfer-react) supports the tooling via React App.

<DemoFrame
  id='neon-transfer-react'
  src='https://codesandbox.io/embed/2x5gdt?view=preview&module=%2Fsrc%2Fneon-transfer-app.tsx&hidenavigation=1'
  title='Neon-Transfer-Demo'
></DemoFrame> 
-->
